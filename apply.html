<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>international immigration service</title>
    <link rel="stylesheet" href="/css/apply.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
</head>
<body>
   <!-- HEADER-CONTACT -->
   <div class="floating-contact">
    <div class="normal-contanct">
        <a href="#"><i class="far fa-envelope"></i></a>
        <a href="#"> support@internationalimmigrationservice.com</a>&nbsp;
        <a href="#"><i class="fas fa-phone-alt"></i></a>
        <a href="#">+447300433485 </a>
    </div>
    <div class="socials">
        <a href="#"><i class="fab fa-facebook"></i></a>&nbsp;
        <a href="#"><i class="fab fa-twitter"></i></a>&nbsp;
        <a href="#"><i class="fab fa-instagram"></i></a>&nbsp;
        <a href="#"><i class="fab fa-google-plus"></i></a>&nbsp;
        <a href="#"><i class="fab fa-linkedin-in"></i></a>
    </div>
    <!-- LANGUANGE TRANSLATE -->
    <div id="google_translate_element"></div>
</div>


<!-- HEADER -->
<header>
    <div class="logo">
        <a href="/index.html"><img src="/img/immigration-logo.png"></a>
    </div>
    <nav>
        <div class="dropdown">
            <button class="dropbtn">Country <i class="fa-solid fa-chevron-down"></i></button>
            <div class="dropdown-content">
                <a href="#">Canada</a>
                <a href="#">USA</a>
                <a href="#">United Kingdom</a>
                <a href="#">Dubai</a>
                <a href="#">Australia</a>
                <a href="#">New Zealand</a>
                <a href="#">Luxembourg</a>
            </div>
        </div>
        
        <div class="dropdown">
            <button class="dropbtn">Visa <i class="fa-solid fa-chevron-down"></i></button>
            <div class="dropdown-content">
                <a href="#">student visa</a>
                <a href="#">working visa</a>
                <a href="#">vacational visa</a>
            </div>
        </div>
       

        <div class="dropdown">
            <ul>
                <li><a href="/create.html">Create account</a></li>
                <li><a href="/apply.html" id="Apply">Apply Now</a></li>
            </ul>
        </div>

    </nav>



   



    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="/index.html">Home</a>
        <a href="/create.html">Create account</a>
        <a href="/apply.html">Log in</a>
    </div>


    <div class="ham" onclick="openNav()">
        <span class="bar1"></span>
        <span class="bar2"></span>
        <span class="bar3"></span>
    </div>
</header>
<div class="bg-back">
  <div class="box">
    <div class="create">
      <h1>Sign Up</h1>
      <form>
        <label for="fname">User-Name</label>
        <input type="text" id="username" name="username" placeholder="User-Name">
      
        <label for="lname">Password</label>
        <input type="password" id="password" name="password" placeholder="Password">
        
        <input type="submit" value="Submit">
    </form>
        
        <span>or <a href="/create.html">Create Account</a></span>
    </div>
   </div>
  
</div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-cont">
        <div class="footer-box">
            <a href="#"><img src="/img/immigration-logo.png"></a>
            <p>International Immigration Service, we are dedicated to facilitating seamless journeys for individuals
                and families venturing into the exciting realm of global relocation. </p>
        </div>
        <div class="footer-box">
            <h2>Important Links</h2>
            <ul style="display: block;">
                <li><a href="/apply.html" style="color: red;">login</a></li>
                <li><a href="/create.html" style="color: red;">Register</a></li>

            </ul>
        </div>
        <div class="footer-box">
            <h2>Company Address</h2>
            <p>Festival court, 200 brand St, Glasgow G51 1DH, United Kingdom.</p>
            <p>Telephone: +447300433485</p>
            <p> support@internationalimmigrationservice.com</p>
        </div>
        <div class="footer-box">
            <h2>Newsletter</h2>
            <p>Our commitment to excellence is reflected in our unwavering dedication to your success. </p>
            <form>
                <input type="email" placeholder="enter your email">
            </form>
        </div>
    </div>
    <div>
        <div class="horiz-div">
            <!-- <div class="hron"></div> -->
        </div>
        <div class="foot">
            <div class="foot-box">
                <p>Â© International Immigration Service all rights reserved.</p>
            </div>
            <div class="foot-box">
                <a href="#">About us</a>
                <a href="#">contact</a>
                <a href="#">blog</a>
            </div>
        </div>
    </div>
</footer>
   

<!-- Add this somewhere in your HTML -->
<div id="loading" style="display: none;">Loading...</div>

<script type="text/javascript">
    document.querySelector('form').addEventListener('submit', function(event) {
        event.preventDefault();

        let formData = new FormData(event.target);
        let formObject = {};
        for (let [key, value] of formData.entries()) {
            formObject[key] = value;
        }

        // Form validation
        if (!formObject.username || !formObject.password) {
            alert('Username and password are required');
            return;
        }

        // Show loading indicator
        document.getElementById('loading').style.display = 'block';

        fetch('https://invest-zg7a.onrender.com/user/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formObject),
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            console.log(data);
            // Store the JWT in local storage
            localStorage.setItem('jwt', data.token);
            // If the form is successfully submitted, redirect to userDashbord.html
            window.location.href = 'userDashbord.html';
        })
        .catch((error) => {
          console.error('Error:', error);
          alert('There was a problem with the login request. Please try again later.');
        })
        .finally(() => {
          // Hide loading indicator
          document.getElementById('loading').style.display = 'none';
        });
    });

    
</script>
<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement(
            { pageLanguage: 'en' },
            'google_translate_element'
        );
    }
</script>
<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?
cb=googleTranslateElementInit">
</script>
<script src="/js/apply.js"></script>
</body>
</html>